首先思考能不能直接将[3, 1, 5, 8]直接分为类似于[3]、[1, 5, 8]这样两个子问题。这意味着，我们强行认为必须戳完[3]才能戳[1, 5, 8]，或者戳完[1, 5, 8]才能戳[3]，显然这不科学。即这两个子问题之间产生了依赖。

如何消除依赖呢？我们一开始的想法是先假设第一个被戳爆的气球为x，则x两边的气球则产生了依赖；那我们假设不戳爆x，则x两边的气球就没有了依赖关系！这个气球x，我们可以放在最后戳爆它。

这样，对于[3, 1, 5, 8]，假设最后戳爆5，则问题就被划分为如下图所示的两个子问题和一个O(1)的问题。

![image-20200113220939412.png](https://pic.leetcode-cn.com/f91cf0d4f03e32737908aae3d8967f438b2bd2d064a86e0a9e6961cf69769b55-image-20200113220939412.png)



其中，灰色元素表示**不可戳，仅供计分的“虚拟气球”**。而且虚拟气球的值仅与位置有关。假设`f(start, end)`表示从第start到end个气球的最大得分，`nums[i]`表示气球上的值，`nums[start-1]`和`nums[end+1]`是“虚拟气球”则有：

`f(start, end) = max{f(start,i-1) + nums[start-1]*nums[i]*nums[end+1] + f(i+1,end) ,其中i取值为[start,end]}`